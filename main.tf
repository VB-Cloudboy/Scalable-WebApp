#============================================================================================================
# ---INTRODUCTION---
# This architecture focuses on azure services which are required to host scalable PaaS based web application 
# and the code outlined focuses on the infrastructure components. The goal is to understand how various Azure  
# services fit together and deployed using hashicorp language - Terraform. 
#
# ---AUTHOR---
# Vijay Borkar 
#==============================================================================================================

# ------------------------------------------------------------------------------
# TERRAFORM & PROVIDER SETUP
# ------------------------------------------------------------------------------
terraform {
  required_version = "> 0.14.0"
  required_providers {
      azurerm = {
        source  = "hashicorp/azurerm" 
        version = "=2.73.0"
      }
  }
}

# ------------------------------------------------------------------------------
# DECLARING LOCAL VALUES
# ------------------------------------------------------------------------------

locals {
  
  common_tags = {
    environment   = "Development"
    owner         = "Vijay Borkar"
    type          = "Web-App"
    subscription  = "MSDN" 

  }

}

#-----------------------------------------------------------------------------
# RESOURCE GROUP SETUP
#----------------------------------------------------------------------------

module "res_grp_01" {
  source      = "./modules/tf-az-rg"
  rgname      = var.rg_name
  rglocation  = var.rg_location
  rgtags      = local.common_tags
  
}

#-----------------------------------------------------------------------------
# AZURE DNS (Domain Name Service) SETUP
#----------------------------------------------------------------------------

module "pub_dns_01" {
  source = "./modules/tf-az-dns"
  depends_on = [
    module.res_grp_01
  ]
  dnsname = var.pub_dnszone01_name
  dnsresgrp = var.rg_name
  dnstags = local.common_tags
  dns_a_record = var.pub_dnszone01_a_record
  dns_cname_record = var.pub_dnszone01_cname_record
}


#-----------------------------------------------------------------------------
# AZURE FRONT DOOR SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE CDN (Content Delivery Network) SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE STORAGE SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE WEBAPP SERVICE & APP SERVICE ENGINE SETUP
#----------------------------------------------------------------------------


#-----------------------------------------------------------------------------
# AZURE FUNCTION APP SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE REDIS CACHE SETUP
#----------------------------------------------------------------------------


#-----------------------------------------------------------------------------
# AZURE SQL DATABASE SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE COSMOS DATABASE SETUP
#----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# AZURE SEARCH SETUP
#----------------------------------------------------------------------------


































































